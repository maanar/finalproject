{"ast":null,"code":"import _regeneratorRuntime from\"C:/Users/home/Desktop/finalproject/frontend/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"C:/Users/home/Desktop/finalproject/frontend/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"C:/Users/home/Desktop/finalproject/frontend/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import _objectSpread from\"C:/Users/home/Desktop/finalproject/frontend/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import{useEffect,useReducer,useState}from\"react\";import{Link}from\"react-router-dom\";import axios from\"axios\";import logger from\"use-reducer-logger\";//import data from \"../data\";\nimport{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var reducer=function reducer(state,action){switch(action.type){case\"FETCH_REQUEST\":return _objectSpread(_objectSpread({},state),{},{loading:true});case\"FETCH_SUCCESS\":return _objectSpread(_objectSpread({},state),{},{products:action.payload,loading:false});case\"FETCH_FAIL\":return _objectSpread(_objectSpread({},state),{},{loading:false,error:action.payload});default:return state;}};function HomeScreen(){var _useReducer=useReducer(logger(reducer),{products:[],loading:true,error:\"\"}),_useReducer2=_slicedToArray(_useReducer,2),_useReducer2$=_useReducer2[0],loading=_useReducer2$.loading,error=_useReducer2$.error,products=_useReducer2$.products,dispatch=_useReducer2[1];//const [products, setproducts] = useState([]);\nuseEffect(function(){var fetchData=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){var result;return _regeneratorRuntime().wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:dispatch({type:'FETCH_REQUEST'});_context.prev=1;_context.next=4;return axios.get('/api/products');case 4:result=_context.sent;dispatch({type:'FETCH_SUCCESS',payload:result.data});_context.next=11;break;case 8:_context.prev=8;_context.t0=_context[\"catch\"](1);dispatch({type:'FETCH_FAIL',payload:_context.t0.message});case 11:case\"end\":return _context.stop();}}},_callee,null,[[1,8]]);}));return function fetchData(){return _ref.apply(this,arguments);};}();fetchData();},[]);return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h1\",{children:\" featured products\"}),/*#__PURE__*/_jsx(\"div\",{className:\"products\",children:loading?/*#__PURE__*/_jsx(\"div\",{children:\"Loading...\"}):error?/*#__PURE__*/_jsx(\"div\",{children:error}):products.map(function(product){return/*#__PURE__*/_jsxs(\"div\",{className:\"product\",children:[/*#__PURE__*/_jsx(Link,{to:\"/product/\".concat(product.slug),children:/*#__PURE__*/_jsx(\"img\",{src:product.image,alt:product.name})}),/*#__PURE__*/_jsxs(\"div\",{className:\"product-info\",children:[/*#__PURE__*/_jsx(Link,{to:\"/product/\".concat(product.slug),children:/*#__PURE__*/_jsxs(\"p\",{children:[\" \",product.name,\" \"]})}),/*#__PURE__*/_jsxs(\"p\",{children:[\" \",/*#__PURE__*/_jsxs(\"strong\",{children:[product.price,\" \"]})]}),/*#__PURE__*/_jsx(\"button\",{children:\" Add to cart\"})]})]},product.slug);})})]});}export default HomeScreen;","map":{"version":3,"names":["useEffect","useReducer","useState","Link","axios","logger","reducer","state","action","type","loading","products","payload","error","HomeScreen","dispatch","fetchData","get","result","data","message","map","product","slug","image","name","price"],"sources":["C:/Users/home/Desktop/finalproject/frontend/src/screens/HomeScreen.js"],"sourcesContent":["import { useEffect, useReducer, useState } from \"react\";\r\nimport { Link } from \"react-router-dom\";\r\nimport axios from \"axios\";\r\nimport logger from \"use-reducer-logger\";\r\n//import data from \"../data\";\r\n\r\nconst reducer = (state, action) => {\r\n  switch (action.type) {\r\n    case \"FETCH_REQUEST\":\r\n      return { ...state, loading: true };\r\n    case \"FETCH_SUCCESS\":\r\n      return { ...state, products: action.payload, loading: false };\r\n    case \"FETCH_FAIL\":\r\n      return { ...state, loading: false, error: action.payload };\r\n    default:\r\n      return state;\r\n  }\r\n};\r\nfunction HomeScreen(){\r\n     const [{loading , error , products} , dispatch] = useReducer(logger(reducer) , {\r\n      products : [],\r\n      loading : true  ,\r\n       error: \"\",\r\n     });\r\n  \r\n  //const [products, setproducts] = useState([]);\r\n     useEffect (()=> {\r\n        const fetchData =async () => {\r\n          dispatch ({type: 'FETCH_REQUEST'});\r\n          try {\r\n            const result = await axios.get('/api/products');\r\n            dispatch ({type: 'FETCH_SUCCESS',payload: result.data});\r\n          } catch (err) {\r\n            dispatch({type : 'FETCH_FAIL', payload: err.message});\r\n          }\r\n\r\n        \r\n        //setproducts(result.data);\r\n       };\r\n       fetchData();\r\n     }, []);\r\n    return <div><h1> featured products</h1>\r\n      \r\n    <div className= \"products\">\r\n        \r\n        {\r\n          loading?( \r\n          <div>Loading...</div>\r\n          ):\r\n          error? (\r\n          <div>{error}</div>\r\n          ) : (\r\n\r\n        products.map(product => (\r\n        <div className=\"product\" key ={product.slug}>\r\n          <Link to ={`/product/${product.slug}`}>\r\n          <img src ={product.image} alt={product.name}/>\r\n          </Link >\r\n          <div className=\"product-info\">\r\n          <Link   to ={`/product/${product.slug}`}>\r\n          <p> {product.name} </p>\r\n          </Link >\r\n          <p> <strong>{product.price} </strong></p>\r\n          <button> Add to cart</button>\r\n          </div>\r\n        </div>\r\n        ))\r\n      )}\r\n      \r\n    </div></div>\r\n}\r\nexport default HomeScreen;"],"mappings":"mhBAAA,OAASA,SAAS,CAAEC,UAAU,CAAEC,QAAQ,KAAQ,OAAO,CACvD,OAASC,IAAI,KAAQ,kBAAkB,CACvC,MAAOC,MAAK,KAAM,OAAO,CACzB,MAAOC,OAAM,KAAM,oBAAoB,CACvC;AAAA,wFAEA,GAAMC,QAAO,CAAG,QAAVA,QAAO,CAAIC,KAAK,CAAEC,MAAM,CAAK,CACjC,OAAQA,MAAM,CAACC,IAAI,EACjB,IAAK,eAAe,CAClB,sCAAYF,KAAK,MAAEG,OAAO,CAAE,IAAI,GAClC,IAAK,eAAe,CAClB,sCAAYH,KAAK,MAAEI,QAAQ,CAAEH,MAAM,CAACI,OAAO,CAAEF,OAAO,CAAE,KAAK,GAC7D,IAAK,YAAY,CACf,sCAAYH,KAAK,MAAEG,OAAO,CAAE,KAAK,CAAEG,KAAK,CAAEL,MAAM,CAACI,OAAO,GAC1D,QACE,MAAOL,MAAK,CAAC,CAEnB,CAAC,CACD,QAASO,WAAU,EAAE,CAChB,gBAAkDb,UAAU,CAACI,MAAM,CAACC,OAAO,CAAC,CAAG,CAC9EK,QAAQ,CAAG,EAAE,CACbD,OAAO,CAAG,IAAI,CACbG,KAAK,CAAE,EACT,CAAC,CAAC,0EAJMH,OAAO,eAAPA,OAAO,CAAGG,KAAK,eAALA,KAAK,CAAGF,QAAQ,eAARA,QAAQ,CAAII,QAAQ,iBAMjD;AACGf,SAAS,CAAE,UAAK,CACb,GAAMgB,UAAS,4FAAE,gJACfD,QAAQ,CAAE,CAACN,IAAI,CAAE,eAAe,CAAC,CAAC,CAAC,sCAEZL,MAAK,CAACa,GAAG,CAAC,eAAe,CAAC,QAAzCC,MAAM,eACZH,QAAQ,CAAE,CAACN,IAAI,CAAE,eAAe,CAACG,OAAO,CAAEM,MAAM,CAACC,IAAI,CAAC,CAAC,CAAC,+EAExDJ,QAAQ,CAAC,CAACN,IAAI,CAAG,YAAY,CAAEG,OAAO,CAAE,YAAIQ,OAAO,CAAC,CAAC,CAAC,oEAK1D,kBAXMJ,UAAS,0CAWf,CACDA,SAAS,EAAE,CACb,CAAC,CAAE,EAAE,CAAC,CACP,mBAAO,oCAAK,0CAA2B,cAEvC,YAAK,SAAS,CAAE,UAAU,UAGpBN,OAAO,cACP,mCAAqB,CAErBG,KAAK,cACL,qBAAMA,KAAK,EAAO,CAGpBF,QAAQ,CAACU,GAAG,CAAC,SAAAC,OAAO,qBACpB,aAAK,SAAS,CAAC,SAAS,wBACtB,KAAC,IAAI,EAAC,EAAE,oBAAeA,OAAO,CAACC,IAAI,CAAG,uBACtC,YAAK,GAAG,CAAGD,OAAO,CAACE,KAAM,CAAC,GAAG,CAAEF,OAAO,CAACG,IAAK,EAAE,EACtC,cACR,aAAK,SAAS,CAAC,cAAc,wBAC7B,KAAC,IAAI,EAAG,EAAE,oBAAeH,OAAO,CAACC,IAAI,CAAG,uBACxC,yBAAKD,OAAO,CAACG,IAAI,OAAM,EACf,cACR,sCAAI,0BAASH,OAAO,CAACI,KAAK,OAAW,GAAI,cACzC,wCAA6B,GACvB,GAVuBJ,OAAO,CAACC,IAAI,CAWrC,EACL,CACF,EAEG,GAAM,CAChB,CACA,cAAeT,WAAU"},"metadata":{},"sourceType":"module","externalDependencies":[]}